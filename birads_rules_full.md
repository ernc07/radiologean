
# BI-RADS Kural Seti — **Tüm Olasılıklar** (Mamografi, 2013 Sözlüğü Temelli • 2025 Pratik)
Bu belge, uygulamada **tek kaynak** olarak kullanılmak üzere kitle ve kalsifikasyonlar için **tüm kombinasyonları**, **varsayılan BI-RADS** skorlarını ve **yükseltme/düşürme** kurallarını içerir. (Şekil ve sınır *ayrı* değerlendirilir.)

> **Kategori tanımları:** 4A (%2–10), 4B (%10–50), 4C (%50–<95), 5 (≥%95).  
> **Genel kural:** En şüpheli bulgu **nihai kategoriyi** belirler (ortalama alınmaz).

---

## 0) Değerlendirme Ön Koşulları (Öncelikli Filtreler)
1. **Tek projeksiyon bulgusu (one-view)**, **sadece MLO**, **obscured (örtülü)** kenar → **BI-RADS 0**.  
   - Tamamlayıcı projeksiyonlar/spot büyütme/DBT/US sonrası yeniden kategorize.
2. **Açık benign örüntü** mevcutsa doğrudan **BI-RADS 2**:  
   - Yağ içeren lezyon, **skin/vascular** kalsifikasyon, **popcorn/dystrophic**, **eggshell/rim**, **large rod-like/secretory**, **milk-of-calcium (layering/“teacup”)**.  
   - Milk-of-calcium için **layering** gösterilemiyorsa 0 veya şüpheli morfoloji akışına göre ilerle.
3. **Benign çekinti nedenleri** (konjenital/bilateral inversiyon, post-op skar, akut enfeksiyon) saptanırsa çekinti **tek başına** 5 yapmaz.

---

## 1) Kitle Kuralları — **Şekil × Sınır → Varsayılan** BI-RADS
**Şekil (Shape):** `Round` • `Oval` • `Irregular`  
**Sınır (Margin):** `Circumscribed` • `Obscured` • `Indistinct` • `Microlobulated` • `Spiculated`

> **Not:** “Irregular” **şekli** anlatır; *“irregular margin”* terimi yoktur.

| **Şekil \ Sınır** | **Circumscribed** | **Obscured** | **Indistinct** | **Microlobulated** | **Spiculated** |
|---|---|---|---|---|---|
| **Round** | **2** *(yeni/uyumsuzsa 3)* | **0** | **4B** | **4B** | **4C** |
| **Oval** | **2** *(yeni/uyumsuzsa 3)* | **0** | **4B** | **4B** | **4C** |
| **Irregular** | **4A** *(nadir, bağlama duyarlı)* | **0** | **4B** | **4B** | **4C** |

**Yükselticiler (kitle için):**
- Aşağıdakilerden **biri** varsa **+1 seviye**, **birkaçı birlikte** veya görünüm *klasik malign* ise **5**:  
  **Meme başı/deri çekintisi**, **Architectural Distortion (AD)**, **segmental ince lineer/pleomorfik kalsifikasyonlar**, **patolojik aksiller LAP**, belirgin **cilt kalınlaşması/ödem**.

**Örnekler:**
- `Irregular + Indistinct` + **nipple retraction** → **5**  
- `Oval + Circumscribed` (stabil) → **2**; yeni/uyumsuz → **3**  
- `Any + Spiculated` → **4C**; **+ (retraction veya AD)** → **5**

---

## 2) Kalsifikasyon Kuralları — **Morfoloji × Dağılım → Varsayılan** BI-RADS
**Morfoloji (Suspicious):** `Amorphous`, `Coarse Heterogeneous`, `Fine Pleomorphic`, `Fine Linear/Linear Branching`  
**Morfoloji (Benign):** `Skin`, `Vascular`, `Popcorn/Dystrophic`, `Eggshell/Rim`, `Large Rod-like/Secretory`, `Milk of Calcium`  
**Dağılım:** `Grouped`, `Regional`, `Linear`, `Segmental`, `Diffuse`

> **Önemli ayrım:** **Coarse Heterogeneous** ≠ **Popcorn/Dystrophic**. İlki **şüpheli (tipik 4B)**, ikincisi **benign (2)**.

### 2.1 Şüpheli Morfolojiler
Aşağıdaki tablolar **varsayılan** skorları verir.

#### a) **Amorphous**
| **Dağılım** | Grouped | Regional | Linear | Segmental | Diffuse |
|---|---:|---:|---:|---:|---:|
| **BI-RADS** | **4B** | **4B** | **4C** | **4C** | **4A*** |

\* *Diffuse:* app’te **varsayılan 4A**; **bilateral simetrik/çok odaklı** ve tipik benign paterne yakınsa (ör. minimal amorfi, yaygın dağılmış) **3**’e çekmek için bir `“bilateral-simetri”` seçeneği ekleyin.

#### b) **Coarse Heterogeneous**
| **Dağılım** | Grouped | Regional | Linear | Segmental | Diffuse |
|---|---:|---:|---:|---:|---:|
| **BI-RADS** | **4B** | **4B** | **4C** | **4C** | **4A*** |

\* *Diffuse:* varsayılan **4A**; **bilateral simetrik** seçeneği işaretliyse **3**.

#### c) **Fine Pleomorphic**
| **Dağılım** | Grouped | Regional | Linear | Segmental | Diffuse |
|---|---:|---:|---:|---:|---:|
| **BI-RADS** | **4B** | **4B** | **4C** | **4C** | **4A*** |

\* *Diffuse:* varsayılan **4A**; **bilateral simetrik** ise **3**.

#### d) **Fine Linear / Linear Branching**
| **Dağılım** | Grouped | Regional | Linear | Segmental | Diffuse |
|---|---:|---:|---:|---:|---:|
| **BI-RADS** | **4C** | **4C** | **4C** | **4C** | **4B** |

> Not: “Fine linear/branching” morfoloji dağılımdan bağımsız **yüksek şüpheli**dir; *diffuse* nadirdir ve bağlama göre **4B–4C** aralığı düşünülebilir (app’te **4B** bırakın).

### 2.2 Düşük Şüpheli / Benign Morfolojiler
- **Round/Punctate**  
  - **Tek klaster, stabil** → **3**  
  - **Yeni/artan** → **4A**  
  - **Linear/Segmental dağılım** (duktal yol izlenimi) → **4B**  
  - **Bilateral diffüz/dağınık** → **2**
- **Skin / Vascular / Popcorn-Dystrophic / Eggshell-Rim / Large Rod-like-Secretory / Milk of Calcium (layering+)** → **2**  
  - **Milk of Calcium** için **layering** gösterilemiyorsa: **0** (lateral/LM iste) veya şüpheli morfoloji akışına göre.

### 2.3 Kalsifikasyonlar için Yükselticiler
- **Eşlik eden**: düzensiz/spiküle kitle, belirgin **AD**, **nipple/skin retraction** → bir seviye yükselt; toplam görünüm *klasik malign* ise **5**.

---

## 3) Birleştirme Mantığı (Mass + Calcs + Associated)
1. **Mass** ve **Calcs** modülleri ayrı ayrı kategori üretir.  
2. **Nihai BI-RADS**, bu ikisi ve **eşlik eden bulgular** arasında **en yüksek** kategoridir.  
3. **Çekinti (retraction)** kuralı:  
   - **Tek başına 5 değil.**  
   - **Spiculated/irregular kitle** veya **segmental ince lineer/pleomorfik** kalsifikasyonlarla birlikteyse sıklıkla **5**.  
4. **AD** kuralı:  
   - **Düzensiz/spiküle kitle + AD** ⇒ **5**  
   - **Mikrolobüle kitle + AD** ⇒ **4C** (otomatik 5 değil)

---

## 4) Uygulama (App) İçin Doğrudan Kullanılabilir Kurallar

### 4.1 Fonksiyonel İskelet
- `default_mass_category(shape, margin) -> Category` (Tablo 1’e göre)
- `default_calc_category(morph, dist, bilateral=False) -> Category` (Tablo 2’ye göre)
- `upgrade_with_associated_features(category, retraction, AD, suspicious_calcs, nodes) -> Category`
- `final_category(mass_cat, calc_cat, upgrades...) -> Category` = **max**

### 4.2 Ek UI Alanları
- **Bilateral/simetrik?** (kalsifikasyonlar için) → Diffuse’de **4A → 3** düşürebilsin.
- **One-view / Sadece MLO?** → **0** önerisine zorlansın.
- **Benign checkboxes** (skin/vascular/popcorn/eggshell/secretory/milk-of-calcium-layering) → **2**.

### 4.3 Hızlı Test Seti
- `Irregular + Indistinct` → 4B; + retraction → **5**  
- `Any + Spiculated` → 4C; + AD → **5**  
- `Oval + Circumscribed` (stabil) → 2  
- `Amorphous + Grouped` → 4B  
- `Coarse Heterogeneous + Segmental` → 4C  
- `Fine Linear/Branching + Regional` → 4C  
- `Round/Punctate + single stable cluster` → 3; **new/increasing** → 4A  
- `Diffuse calcifications + bilateral` → 2–3 (varsayılan 3)  
- `One-view asymmetry` → 0

---

## 5) Sık Yapılan Hatalar (ve Bu Belgede Düzeltmeleri)
- **Çekinti = otomatik 5** ❌ → **Yanlış.** Şüpheli morfolojiyle **yükseltici**; spiculated/irregular + çekinti/AD ile **5**.
- **Coarse Heterogeneous = Popcorn/Dystrophic** ❌ → **Yanlış.** İlki **şüpheli (4B)**, ikincisi **benign (2)**.
- **Obscured = şüpheli** ❌ → **Yanlış.** Bu **değerlendirme eksik** demek; önce **0**, tamamlayıcı görüntü sonra kategori.
- **“Irregular margin”** kullanımı ❌ → **Yanlış terim.** “Irregular” **şekildir**; margin sözlüğü farklıdır.
- **Regional (Bölgesel) dağılım yok** ❌ → **Eksik.** UI ve kurallara eklendi.

---

## 6) Yönetim Önerisi (Özet)
- **BI-RADS 0**: Tamamlayıcı görüntü (ortogonal, spot-mag, DBT ± US).  
- **BI-RADS 2**: Rutin tarama.  
- **BI-RADS 3**: Kısa süreli takip (genelde 6 ay).  
- **BI-RADS 4A/4B/4C**: **Biyopsi**.  
- **BI-RADS 5**: **Yüksek olasılıkla malign**, acil biyopsi/cerrahi planlama.

---

> Bu belge, uygulamada tek bir **lookup** kaynağı olarak kullanılabilir. İlgili tabloları doğrudan `rules.py` içine sabit sözlükler olarak aktarın ve **unit testlerle** doğrulayın.
